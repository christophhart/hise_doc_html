<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<base href="https://docs.hise.dev/"/>
	<title>HISE | Docs</title>
	<link rel="stylesheet" type="text/css" href="/template/css/prism.css">
	<link rel="stylesheet" type="text/css" media="screen" href="/template/css/autoComplete.css">
	<link href="https://fonts.googleapis.com/css?family=Heebo" rel="stylesheet">
	<link rel="stylesheet" type="text/css" media="screen" href="/template/css/style.css">
	<script src="/template/scripts/toc.json"></script>
	<script language="javascript" src="/template/scripts/generate.js"></script>
</head>
<body>
	<header>
		<a id="nav-button">
		</a>
		<logo>
			
			<a href="/">
				<div class="heading">HISE Docs</div>
			</a>
		</logo>
		<div class="search">
			<input id="autoComplete" tabindex="1">
		</div>
	</header>

	<div class="container">
		<nav class="toc">
			<script>
				for (rootIndex in rootDb.Children) {
					document.write(createTocElement(rootDb.Children[rootIndex]));
				}
			</script>

		</nav>

		<div class="content"><h1 id="math"><b>Math</b>
</h1>
<p>The <code>Math</code>
 class is a collection of math functions that can be used in the scripting engine. It is a feature-complete clone of the "official" <a href="https://www.w3schools.com/Js/js_math.asp">Javascript Math object</a>
.</p>
<p>Unless specified otherwise, the value type of the function is <code>double</code>
. Most of the functions are pretty self-explanatory if you managed to get through high school, but there are a few special function that deserve a more detailed explanation.</p>
<p class="comment">If you're going to start out with SNEX or use the expression nodes in scriptnode, you might be happy to know that this class is also available there.</p>
<p>In the editor the <code>Math</code>
 keyword will also give you access to a few Math constants (PI, E).<br></p>
<h1 id="class-methods
"><b>Class methods<br></b>
</h1>
<h2 id="abs"><b>abs</b>
</h2>
<p class="comment">Returns the absolute (unsigned) value.</p>
<pre><code class="language-javascript line-numbers">Math.abs(var value)</code></pre>
<p><br></p>
<p>Useful for inverting negative values.</p>
<img style="max-width:300px;" src="images/custom/math/abs.png"></img>
<p><br></p>
<h2 id="acos"><b>acos</b>
</h2>
<p class="comment">Calculates the acosine value (radian based).</p>
<pre><code class="language-javascript line-numbers">Math.acos(var value)</code></pre>
<p><br></p>
<img style="max-width:300px;" src="images/custom/math/acos.png"></img>
<p><a href="https://en.wikipedia.org/wiki/Inverse_trigonometric_functions">Wikipedia: Inverse Trigonmetric functions</a>
<br></p>
<h2 id="acosh"><b>acosh</b>
</h2>
<p class="comment">Calculates the acosh value (radian based).</p>
<pre><code class="language-javascript line-numbers">Math.acosh(var value)</code></pre>
<p><br></p>
<img style="max-width:400px;" src="images/custom/math/acosh.png"></img>
<p>The <a href="https://en.wikipedia.org/wiki/Hyperbolic_functions">hyperbolic version</a>
 of acos.</p>
<p><br></p>
<h2 id="asin"><b>asin</b>
</h2>
<p class="comment">Calculates the asine value (radian based).</p>
<pre><code class="language-javascript line-numbers">Math.asin(var value)</code></pre>
<p><br></p>
<img style="max-width:400px;" src="images/custom/math/asin.png"></img>
<p><br></p>
<h2 id="asinh"><b>asinh</b>
</h2>
<p class="comment">Calculates the asinh value (radian based).</p>
<pre><code class="language-javascript line-numbers">Math.asinh(var value)</code></pre>
<p><br></p>
<img style="max-width:400px;" src="images/custom/math/asinh.png"></img>
<p><br></p>
<h2 id="atan"><b>atan</b>
</h2>
<p class="comment">Calculates the atan value (radian based).</p>
<pre><code class="language-javascript line-numbers">Math.atan(var value)</code></pre>
<p><br></p>
<img style="max-width:400px;" src="images/custom/math/atan.png"></img>
<p><br></p>
<h2 id="atanh"><b>atanh</b>
</h2>
<p class="comment">Calculates the atanh value (radian based).</p>
<pre><code class="language-javascript line-numbers">Math.atanh(var value)</code></pre>
<p><br></p>
<img style="max-width:400px;" src="images/custom/math/atanh.png"></img>
<p><br></p>
<h2 id="ceil"><b>ceil</b>
</h2>
<p class="comment">Rounds up the value.</p>
<pre><code class="language-javascript line-numbers">Math.ceil(var value)</code></pre>
<p><br></p>
<img style="max-width:400px;" src="images/custom/math/ceil.png"></img>
<p>Pushes the value up to the next full number.<br></p>
<h2 id="cos"><b>cos</b>
</h2>
<p class="comment">Calculates the cosine value (radian based).</p>
<pre><code class="language-javascript line-numbers">Math.cos(var value)</code></pre>
<p><br></p>
<img style="max-width:400px;" src="images/custom/math/cos.png"></img>
<p>Basic <a href="https://en.wikipedia.org/wiki/Trigonometric_functions">Trigonometric Function</a>
. Returns 1 at 0 and -1 at PI.<br> </p>
<h2 id="cosh"><b>cosh</b>
</h2>
<p class="comment">Calculates the cosh value (radian based).</p>
<pre><code class="language-javascript line-numbers">Math.cosh(var value)</code></pre>
<p><br></p>
<img style="max-width:400px;" src="images/custom/math/cosh.png"></img>
<p><br></p>
<h2 id="exp"><b>exp</b>
</h2>
<p class="comment">Calculates the exp value.</p>
<pre><code class="language-javascript line-numbers">Math.exp(var value)</code></pre>
<p><br></p>
<img style="max-width:400px;" src="images/custom/math/exp.png"></img>
<p><a href="https://en.wikipedia.org/wiki/Exponential_function">Wikipedia: Exponential function</a>
<br></p>
<h2 id="floor"><b>floor</b>
</h2>
<p class="comment">Rounds down the value.</p>
<pre><code class="language-javascript line-numbers">Math.floor(var value)</code></pre>
<p><br></p>
<img style="max-width:400px;" src="images/custom/math/floor.png"></img>
<p>Opposite of <a href="scripting/scripting-api/math/index.html#ceil">Math.ceil()</a>
</p>
<p><br></p>
<h2 id="fmod"><b>fmod</b>
</h2>
<p class="comment">Returns the remainder when dividing value with limit.</p>
<pre><code class="language-javascript line-numbers">Math.fmod(var value, var limit)</code></pre>
<p><br></p>
<img style="max-width:400px;" src="images/custom/math/fmod.png"></img>
<p>This is usually useful for two use cases:</p>
<ol><li>Get the fractional part: <code>Math.fmod(19.52, 1.0) == 0.52)</code>
</li>
<li>Loop around a range limit: <code>Math.fmod(13.2, 12.0) == 1.2</code>
</li>
</ol>
<p>Note that if you're using it for the latter use case, the function <a href="scripting/scripting-api/math/index.html#wrap">Math.wrap()</a>
 might be a better candidate as it correctly wraps around negative values too.<br></p>
<h2 id="from0to1"><b>from0To1</b>
</h2>
<p class="comment">Converts a normalised value (between 0 and 1) to a range defined by the JSON data in rangeObj.</p>
<pre><code class="language-javascript line-numbers">Math.from0To1(var value, var rangeObj)</code></pre>
<p><br>Converting between value ranges is a pretty common task when writing scripts. This function will scale a normalized input value from (0...1) to a given output range which allows you to switch between different domains without excessive math formula usage. The inverse process can be achieved with <a href="scripting/scripting-api/math/index.html#to0to1">Math.to0to1</a>
.</p>
<p>The second parameter will define a range and you can either use a JSON object or a fix object created by a <a href="scripting/scripting-api/fixobjectfactory/index.html">FixObjectFactory</a>
. The latter will significantly improve the performance of this function because it doesn't have to look up the dynamic properties but uses a internal LUT to create the C++ range object.</p>
<p>A range object has up to 5 properties:</p>
<ul><li>a minimum value</li>
<li>a maximum value</li>
<li>a factor that skews the curve (think gamma curve)</li>
<li>an interval for making discrete steps</li>
<li>a inversion</li>
</ul>
<p class="comment">Note that the interval and the skew factor property are mutually exclusive: you either want to skew the output or you want discrete steps .</p>
<p>Unfortunately there are multiple types of range definitions used across HISE so there is not a single property set, but it tries to cope with them all and automatically detects which range property set to use:</p>
<table><thead><td><b>Domain </b>
</td>
<td><b>Property Names </b>
</td>
<td><b>Additional information </b>
</td>
</thead>
<tr><td><b>scriptnode</b>
 </td>
<td><code>MinValue</code>
, <code>MaxValue</code>
, <code>SkewFactor</code>
, <code>StepSize</code>
, <code>Inverted</code>
 </td>
<td>the range object from scriptnode parameters </td>
</tr>
<tr><td><b>UI components</b>
 </td>
<td><code>min</code>
, <code>max</code>
, <code>middlePosition</code>
, <code>stepSize</code>
, <code>Inverted</code>
 </td>
<td>the range object from a UI component's JSON. Note that it uses the middle position to calculate the skew factor (this introduces a small overhead so make sure to use another mode if performance is critical) </td>
</tr>
<tr><td>MIDI Automation </td>
<td><code>Start</code>
, <code>End</code>
, <code>Skew</code>
, <code>Interval</code>
, <code>Inverted</code>
 </td>
<td>the range object from a MIDI automation connection <a href="scripting/scripting-api/midiautomationhandler/index.html">MIDI automation connection</a>
 </td>
</tr>
</table>
<p class="comment">You can use Math.skew() in order to convert a mid position value to a skew factor.</p>
<p>Take a look at the example how to use it with a fix object factory:</p>
<pre><code class="language-javascript line-numbers">// define a prototype using the scriptnode syntax
reg prototype = {
	"MinValue": 20.0,
	"MaxValue": 20000.0,
	"SkewFactor": 0.6
};

// pass that into the factory to create a fix object
const var f1 = Engine.createFixObjectFactory(prototype);

// create a fix object (think JSON but faster)
const var range = f1.create();

// 9.5% slower than just calling Math.pow() (which is the baseline for this function)
const var x = Math.from0To1(0.5, range);

// 34% slower than just calling Math.pow
const var y = Math.from0To1(0.5, prototype);

// There's a small rounding error because of single precision vs. double precision
// but that shouldn't have a real world impact
Console.assertTrue(Math.abs(x - y) < 0.001);</code></pre>
<p><br></p>
<h2 id="isinf"><b>isinf</b>
</h2>
<p class="comment">Checks for infinity. <a href="https://github.com/christophhart/hise_documentation/edit/master/scripting/scripting-api/math/isinf.md">Edit on GitHub</a>
</p>
<pre><code class="language-javascript line-numbers">Math.isinf(var value)</code></pre>
<p><br><br></p>
<h2 id="isnan"><b>isnan</b>
</h2>
<p class="comment">Checks for NaN (invalid floating point value). <a href="https://github.com/christophhart/hise_documentation/edit/master/scripting/scripting-api/math/isnan.md">Edit on GitHub</a>
</p>
<pre><code class="language-javascript line-numbers">Math.isnan(var value)</code></pre>
<p><br><br></p>
<h2 id="log"><b>log</b>
</h2>
<p class="comment">Calculates the log value (with base E).</p>
<pre><code class="language-javascript line-numbers">Math.log(var value)</code></pre>
<p><br></p>
<img style="max-width:400px;" src="images/custom/math/log.png"></img>
<p><a href="https://en.wikipedia.org/wiki/Logarithm">inverse</a>
 of <a href="scripting/scripting-api/math/index.html#exp">Math.exp()</a>
.<br></p>
<h2 id="log10"><b>log10</b>
</h2>
<p class="comment">Calculates the log value (with base 10).</p>
<pre><code class="language-javascript line-numbers">Math.log10(var value)</code></pre>
<p><br></p>
<img style="max-width:400px;" src="images/custom/math/log10.png"></img>
<p><br></p>
<h2 id="max"><b>max</b>
</h2>
<p class="comment">Returns the bigger number.</p>
<pre><code class="language-javascript line-numbers">Math.max(var first, var second)</code></pre>
<p><br></p>
<img style="max-width:400px;" src="images/custom/math/max.png"></img>
<p class="comment"><code>Math.max(x,0);</code>
<br></p>
<h2 id="min"><b>min</b>
</h2>
<p class="comment">Returns the smaller number.</p>
<pre><code class="language-javascript line-numbers">Math.min(var first, var second)</code></pre>
<p><br></p>
<img style="max-width:400px;" src="images/custom/math/min.png"></img>
<p class="comment"><code>Math.min(x,0);</code>
<br></p>
<h2 id="pow"><b>pow</b>
</h2>
<p class="comment">Calculates the power of base and exponent.</p>
<pre><code class="language-javascript line-numbers">Math.pow(var base, var exp)</code></pre>
<p><br></p>
<img style="max-width:400px;" src="images/custom/math/pow.png"></img>
<p class="comment"><code>Math.pow(x,3);</code>
</p>
<p>Be aware that this is a rather costly operation, so if you just want to square the value, the plain ol' <code>x*x</code>
 will get you there faster.<br></p>
<h2 id="randint"><b>randInt</b>
</h2>
<p class="comment">Returns a random integer between the low and the high values. <a href="https://github.com/christophhart/hise_documentation/edit/master/scripting/scripting-api/math/randint.md">Edit on GitHub</a>
</p>
<pre><code class="language-javascript line-numbers">Math.randInt(var low, var high)</code></pre>
<p><br><br></p>
<h2 id="random"><b>random</b>
</h2>
<p class="comment">Returns a random number between 0.0 and 1.0. <a href="https://github.com/christophhart/hise_documentation/edit/master/scripting/scripting-api/math/random.md">Edit on GitHub</a>
</p>
<pre><code class="language-javascript line-numbers">Math.random()</code></pre>
<p><br><br></p>
<h2 id="range"><b>range</b>
</h2>
<p class="comment">Limits the value to the given range.</p>
<pre><code class="language-javascript line-numbers">Math.range(var value, var lowerLimit, var upperLimit)</code></pre>
<p><br></p>
<img style="max-width:400px;" src="images/custom/math/range.png"></img>
<p class="comment"><code>Math.range(x, -1, 1)</code>
<br></p>
<h2 id="round"><b>round</b>
</h2>
<p class="comment">Rounds the value to the next integer.</p>
<pre><code class="language-javascript line-numbers">Math.round(var value)</code></pre>
<p><br></p>
<img style="max-width:400px;" src="images/custom/math/round.png"></img>
<p>Rounds the value up or down at .5<br></p>
<h2 id="sanitize"><b>sanitize</b>
</h2>
<p class="comment">Sets infinity & NaN floating point numbers to zero. <a href="https://github.com/christophhart/hise_documentation/edit/master/scripting/scripting-api/math/sanitize.md">Edit on GitHub</a>
</p>
<pre><code class="language-javascript line-numbers">Math.sanitize(var value)</code></pre>
<p><br><br></p>
<h2 id="sign"><b>sign</b>
</h2>
<p class="comment">Returns the sign of the value.</p>
<pre><code class="language-javascript line-numbers">Math.sign(var value)</code></pre>
<p><br></p>
<img style="max-width:400px;" src="images/custom/math/sign.png"></img>
<p><a href="https://en.wikipedia.org/wiki/Sign_function">Sign function</a>
<br></p>
<h2 id="sin"><b>sin</b>
</h2>
<p class="comment">Calculates the sine value (radian based).</p>
<pre><code class="language-javascript line-numbers">Math.sin(var value)</code></pre>
<p><br></p>
<img style="max-width:400px;" src="images/custom/math/sin.png"></img>
<p>Oh, holy. As in <a href="hise-modules/sound-generators/list/sinesynth.html">Sinewave Generator</a>
.</p>
<p><br></p>
<h2 id="sinh"><b>sinh</b>
</h2>
<p class="comment">Calculates the sinh value (radian based).</p>
<pre><code class="language-javascript line-numbers">Math.sinh(var value)</code></pre>
<p><br></p>
<img style="max-width:400px;" src="images/custom/math/sinh.png"></img>
<p><br></p>
<h2 id="skew"><b>skew</b>
</h2>
<p class="comment">Returns the skew factor for the given mid point.</p>
<pre><code class="language-javascript line-numbers">Math.skew(var start, var end, var midPoint)</code></pre>
<p><br>The raw usage of this function allows you to simulate the range behaviour from the <a href="scripting/scripting-api/math/index.html#from0to1">Math.from0to1()</a>
 method:</p>
<pre><code class="language-javascript line-numbers">const var skewFactor = Math.skew(0.0, 20000.0, 1000.0);
const var midPoint = Math.pow(0.5, 1.0 / skewFactor) * 20000.0; // => 1000</code></pre>
<p>However the most interesting use case for this would be if you want to convert a range object from a mid point to a skew factor based range definition for increased performance:</p>
<pre><code class="language-javascript line-numbers">// This is a range how it would come from a UI component
// it defines the curve with a middle position
const var p1 = {
	min: 20.0,
	max: 20000.0,
	middlePosition: 1000.0
}

// Using a skew-based range avoids an additional log calculation
// in the conversion functions
const var p2 = {
	MinValue: p1.min,
	MaxValue: p1.max,
	SkewFactor: Math.skew(p1.min, p1.max, p1.middlePosition)
};

// We're caring about performance here so we use fix objects:
const var f1 = Engine.createFixObjectFactory(p1);
const var f2 = Engine.createFixObjectFactory(p2);
const var o1 = f1.create();
const var o2 = f2.create();

{
	.profile(" - mid point with JSON");

	for(i = 0; i < 100000; i++)
		Math.from0To1(0.5, p1);
}

{
	.profile(" - skew factor with JSON");

	for(i = 0; i < 100000; i++)
		Math.from0To1(0.5, p2);
}

{
	.profile(" - mid point with fix object");

	for(i = 0; i < 100000; i++)
		Math.from0To1(0.5, o1);
}

{
	.profile(" - skew factor with fix object");

	for(i = 0; i < 100000; i++)
		Math.from0To1(0.5, o2);
}

/* Results:
- mid point with JSON: 83.185 ms
- skew factor with JSON: 29.896 ms
- mid point with fix object: 27.032 ms
- skew factor with fix object: 24.955 ms
*/</code></pre>
<p>As you can see, the performance can be drastically improved from 83ms to 25ms by using both the <code>skew()</code>
 function and a fix object.<br></p>
<h2 id="smoothstep"><b>smoothstep</b>
</h2>
<p class="comment">Calculates a smooth transition between the lower and the upper value.</p>
<pre><code class="language-javascript line-numbers">Math.smoothstep(var input, var lower, var upper)</code></pre>
<p><br></p>
<img style="max-width:400px;" src="images/custom/math/smoothstep.png"></img>
<p class="comment"><code>Math.smoothstep(x,0,2);</code>
</p>
<p>This function is very popular in graphics programming because it allows a seemless transition between two values, but there are certainly a few interesting use cases for DSP scripting / MIDI processing too. A good explanation of this function can be found <a href="https://thebookofshaders.com/glossary/?search=smoothstep">here</a>
.</p>
<p><br></p>
<h2 id="sqr"><b>sqr</b>
</h2>
<p class="comment">Calculates the square (x<i>x) of the value.</i>
</p>
<pre><code class="language-javascript line-numbers">Math.sqr(var value)</code></pre>
<p><br></p>
<img style="max-width:400px;" src="images/custom/math/sqr.png"></img>
<p><br></p>
<h2 id="sqrt"><b>sqrt</b>
</h2>
<p class="comment">Calculates the square root of the value.</p>
<pre><code class="language-javascript line-numbers">Math.sqrt(var value)</code></pre>
<p><br></p>
<img style="max-width:400px;" src="images/custom/math/sqrt.png"></img>
<p><a href="https://en.wikipedia.org/wiki/Square_root">Wikipedia: Square Root</a>
<br></p>
<h2 id="tan"><b>tan</b>
</h2>
<p class="comment">Calculates the tan value (radian based).</p>
<pre><code class="language-javascript line-numbers">Math.tan(var value)</code></pre>
<p><br></p>
<img style="max-width:400px;" src="images/custom/math/tan.png"></img>
<p><br></p>
<h2 id="tanh"><b>tanh</b>
</h2>
<p class="comment">Calculates the tanh value (radian based).</p>
<pre><code class="language-javascript line-numbers">Math.tanh(var value)</code></pre>
<p><br></p>
<img style="max-width:400px;" src="images/custom/math/tanh.png"></img>
<p><br></p>
<h2 id="to0to1"><b>to0To1</b>
</h2>
<p class="comment">Converts a value inside a range defined by the JSON data in range obj to a normalised value.</p>
<pre><code class="language-javascript line-numbers">Math.to0To1(var value, var rangeObj)</code></pre>
<p><br>This function will take a range defined by a JSON object and convert values back and to the normalized range of <code>0...1</code>
.</p>
<p>Take a look at the <a href="scripting/scripting-api/math/index.html#from0to1">Math.from0To1()</a>
 function for a detailed description on how to use this method.<br></p>
<h2 id="todegrees"><b>toDegrees</b>
</h2>
<p class="comment">Converts radian (0...2PI) to degree (0...3600).</p>
<pre><code class="language-javascript line-numbers">Math.toDegrees(var value)</code></pre>
<p><br></p>
<p><a href="https://en.wikipedia.org/wiki/Degree_(angle">Wikipedia: Degrees</a>
)</p>
<pre><code class="language-javascript line-numbers">Console.print(Math.toDegrees(Math.PI*2)); // 360.0</code></pre>
<p><br></p>
<h2 id="toradians"><b>toRadians</b>
</h2>
<p class="comment">Converts degree (0...3600) to radian (0...2<i>PI).</i>
</p>
<pre><code class="language-javascript line-numbers">Math.toRadians(var value)</code></pre>
<p><br></p>
<p><a href="https://en.wikipedia.org/wiki/Radian">Wikipedia: Radian</a>
</p>
<pre><code class="language-javascript line-numbers">Console.print(Math.toRadians(360)); // 6.2831.. // PI*2</code></pre>
<p><br></p>
<h2 id="wrap"><b>wrap</b>
</h2>
<p class="comment">Wraps the value around the limit (always positive).</p>
<pre><code class="language-javascript line-numbers">Math.wrap(var value, var limit)</code></pre>
<p><br></p>
<p>Unlike its sibling <a href="scripting/scripting-api/math/index.html#fmod">fmod()</a>
, this function will not behave weird with negative values, so if you rely on it to loop around correctly with negative numbers, use this instead.</p>
<pre><code class="language-javascript line-numbers">// fmod will not wrap around zero
Console.print(Math.fmod(-1.0, 19.0)); // -> -1.0

// wrap will... wrap around zero
Console.print(Math.wrap(-1.0, 19.0)); // -> 18.0</code></pre>
<p><br></p>
<div class="content-footer"><span class="content-footer-left"><a href="https://github.com/christophhart/hise_documentation/edit/master/scripting/scripting-api/math/Readme.md">Edit on GitHub</a>
</span>

<span class="content-footer-right">Next: <a href="scripting/scripting-api/globalcable/index.html">GlobalCable</a>
</span>

<p class="content-footer-metadata">Christoph Hart, Do Mayer<br>03.06.2019<br></p>
</div>

			<!-- content end -->
		</div>

		<!-- container end -->
	</div>

	 <footer>  
		 <div> <a href="https://github.com/christophhart/hise_documentation/tree/master"> HISE Docs </a> <img src="/template/css/images/pd.svg" width="12px" id="year" style="padding:2px 2px" /></div> 
	 </footer>  

	<script>   document.getElementById("year").innerHTML = new Date().getFullYear();  </script>
	<script src="/template/scripts/prism.js"></script>
	<script src="/template/scripts/autoComplete.js"></script>
	<script src="/template/scripts/search.js"></script>
	
</body>
</html>
